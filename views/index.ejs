<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Balance de Movimientos</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <!-- Botón para cambiar el modo -->
  <button id="toggle-theme">Cambiar a Modo Oscuro</button>

  <h1>Balance: <%= balance %></h1>
  <h2>Agregar Movimiento</h2>
  <form action="/agregar-movimiento" method="POST">
    <label for="tipo">Tipo:</label>
    <select name="tipo" id="tipo">
      <option value="entrada">Entrada</option>
      <option value="salida">Salida</option>
    </select>
    <label for="monto">Monto:</label>
    <input type="number" name="monto" id="monto" step="0.01" required>
    <label for="descripcion">Descripción:</label>
    <input type="text" name="descripcion" id="descripcion" required>
    <button type="submit">Agregar</button>
  </form>
  <h2>Registro de Movimientos</h2>
  <ul>
    <% movimientos.forEach(movimiento => { %>
      <li>
        <span class="fecha"><%= movimiento.fecha %></span> -
        <span class="<%= movimiento.tipo %>"><%= movimiento.tipo %>: <%= movimiento.monto %></span>
        (<%= movimiento.descripcion %>)
      </li>
    <% }) %>
  </ul>

  <!-- Script para cambiar el modo -->
  <script>
    const toggleButton = document.getElementById('toggle-theme');
    const body = document.body;

    // Verificar el tema guardado en localStorage
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      body.setAttribute('data-theme', savedTheme);
      toggleButton.textContent = savedTheme === 'dark' ? 'Cambiar a Modo Claro' : 'Cambiar a Modo Oscuro';
    }

    // Cambiar el tema al hacer clic en el botón
    toggleButton.addEventListener('click', () => {
      if (body.getAttribute('data-theme') === 'dark') {
        body.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
        toggleButton.textContent = 'Cambiar a Modo Oscuro';
      } else {
        body.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
        toggleButton.textContent = 'Cambiar a Modo Claro';
      }
    });
  </script>
</body>
</html>